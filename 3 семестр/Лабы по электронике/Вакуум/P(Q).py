import matplotlib.pyplot as plt
import numpy as np

# Данные из эксперимента
Q_cm3_min = [0, 5.03, 10.07, 15.07, 20.07, 25.06, 30.07, 35.07, 40.07, 45.07, 
             50.1, 55.5, 55.76, 55.4, 50.08, 45.08, 40.06, 35.06, 30.07, 25.06, 
             20.06, 15.07, 10.07, 5.06, 0]

P_Torr = [0.094, 0.216, 0.3, 0.379, 0.454, 0.526, 0.597, 0.669, 0.739, 0.81, 
          0.879, 0.931, 0.933, 0.931, 0.884, 0.815, 0.746, 0.675, 0.602, 0.531, 
          0.457, 0.38, 0.298, 0.209, 0.082]

# Разделяем данные на прямой и обратный ход
# Прямой ход: увеличение потока от 0 до максимума
Q_forward = Q_cm3_min[0:13]  # от 0 до 55.76
P_forward = P_Torr[0:13]

# Обратный ход: уменьшение потока от максимума до 0
Q_backward = Q_cm3_min[12:]  # от 55.76 до 0
P_backward = P_Torr[12:]

# Создаем график
plt.figure(figsize=(10, 6))
plt.plot(Q_forward, P_forward, 'bo-', linewidth=2, markersize=6, label='Увеличение потока')
plt.plot(Q_backward, P_backward, 'ro-', linewidth=2, markersize=6, label='Уменьшение потока')

# Настройка графика
plt.xlabel('Поток газа Q, см³/мин', fontsize=12)
plt.ylabel('Давление P, Торр', fontsize=12)
# plt.title('Зависимость давления в форвакуумной части от величины газового потока', fontsize=14)
plt.grid(True, alpha=0.3)
plt.legend()

# Добавляем аннотации для некоторых характерных точек
# plt.annotate('Предельное давление', xy=(0, 0.094), xytext=(20, 0.2),
#             arrowprops=dict(arrowstyle='->', color='gray'), fontsize=10)

# Улучшаем внешний вид
plt.tight_layout()

# Показываем график
plt.show()

# Выводим статистику
print(f"Предельное давление (Q=0): {P_Torr[0]:.3f} Торр")
print(f"Максимальное давление (Q≈55.76): {max(P_Torr):.3f} Торр")